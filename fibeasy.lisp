(defun fib (n)
  (cond ((= n 0) 0)
        ((= n 1) 1)
        (t (do ((prev 0)
                (current 1)
                (idx 1 (1+ idx)))
               ((>= idx n) current)
               (psetf current (+ prev current) prev current)))))

(declaim (optimize (speed 3) (safety 0) (debug 0)))

(defun fib-10 (n)
  (declare ((integer 0 1000000000000000000) n))
  (let ((pattern (case (mod n 10)
                   (0 #(0 5 5))
                   (1 #(1 9 6 9 1 4))
                   (2 #(1 4 1 9 6 9))
                   (3 #(2 3 7 8 7 3))
                   (4 #(3 7 8 7 3 2)) 
                   (5 #(5 0 5))
                   (6 #(8 7 3 2 3 7))
                   (7 #(3 7 8 7 3 2))
                   (8 #(1 4 1 9 6 9))
                   (9 #(4 1 9 6 9 1))
                   (t (error "Not good")))))
    (aref pattern (mod (floor (/ n 10)) (length pattern)))))

(declaim (inline fib-10))

(defun main ()
  (dotimes (x (read))
    (format t "~A~%" (fib-10 (1- (expt 2 (floor (log (read) 2))))))))

(fib 1)
(fib 2)
(fib 4)
(fib 7)
(fib 7)


(dotimes (x 100)
  (print (mod (fib (1+ (* 10 x))) 10)))
